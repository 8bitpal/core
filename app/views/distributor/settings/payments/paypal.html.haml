- content_for :payment_type do
  .row-fluid
    .span6
      Activate this area if you plan to accept payments from customers by
      %strong PayPal.

    .span6
      %span.heading hint
      The information entered here will be displayed to customers during the Web Store checkout process.

  = simple_form_for(paypal, as: "paypal", url: distributor_settings_payments_paypal_path, method: "put", html: { class: 'form-horizontal', novalidate: false }) do |f|
    .row-fluid
      .span12
        .important_action{class: current_distributor.payment_paypal ? 'green' : 'red'}
          = f.input_field :payment_paypal, as: :boolean, inline_label: "Accept payments by <strong>PayPal</strong>".html_safe, label: false, 'data-toggle' => 'collapse', 'data-target' => '#paypal_details'

    #paypal_details.row-fluid.collapse{ class: "#{'in' if current_distributor.payment_paypal}" }
      .span6
        %fieldset
          %legend PayPal business email
          = f.input_field :distributor_email, as: :email, disabled: true, class: 'span12', title: "Please contact us if you need to update this email"

      .span6.pull-right.preview
        %span.heading customer preview
        %p.muted This information is displayed to customers at the web store during the checkout process.

        -# NOTE: we don't display the full partial since it includes the PayPal form which interferes with our settings form
        -# = render partial: 'partials/payments/paypal', locals: { form_object: NullObject.new }
        .text-center
          = simple_format(current_distributor.name)
          = image_tag "https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif", alt: "PayPal - The safer, easier way to pay online"


    .row-fluid
      = f.button :submit, 'Save', class: 'btn btn-primary pull-right'

= render partial: 'distributor/settings/payments', locals: { type: :paypal }

