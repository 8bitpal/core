.row-fluid.data-headings
  #route-controls.span7.delivery-actions
    = check_box_tag 'all'
    .btn-group
      = button_tag class: !@real_list ? 'btn' : 'btn btn-primary', id: 'delivered', disabled: !@real_list do
        %i.icon-ok-sign.icon-white
        Delivered
      = button_tag class: "btn#{' btn-primary' if @real_list} dropdown-toggle", data: { toggle: 'dropdown' }, disabled: !@real_list do
        %span.caret
      %ul#missed-options.dropdown-menu{ role: 'menu' }
        %li
          = link_to '#', id: 'pending', tabindex: -1 do
            %i.icon-time
            Delivery Pending
        %li
          = link_to '#', id: 'cancelled', tabindex: -1 do
            %i.icon-remove-sign
            Delivery Cancelled
        %li.divider
        %li= link_to 'Apply Payment On Delivery', '#', id: 'payment-on-delivery', tabindex: -1
        %li= link_to 'Undo Payment', '#', id: 'undo-payment', tabindex: -1

  .span5.export.text-right
    = button_to('Export',
      export_distributor_deliveries_path,
      { id: 'delivery-export', class: 'btn' })

.row-fluid.data-headings

- if @real_list
  #list_type{ data: { type: 'deliveries', date: @selected_date, screen: 'delivery' } }
    %ul#delivery_list.unstyled{ class: (@delivery_list.date.past? ? '' : 'sortable') }
      - DeliverySort.new(@items).grouped_by_addresses.each do |addressh_hash, deliveries|
        %li.row-fluid
          .span12
            %ul.unstyled
              - deliveries.each do |delivery|
                %li.row-fluid.data-listings{ class: delivery.status, data: { delivery_id: delivery.id } }
                  .span6.customer
                    .row-grip
                      = check_box_tag delivery.order_id, '1', false, data: { deliveries: delivery.id }
                      .label.state-label.dso-number
                        = map_pin(delivery)
                        = dso_tooltip(delivery.formated_delivery_number)
                      = render partial: 'status_icons', locals: { status: delivery.status }
                      .customer-holder
                        = customer_badge(delivery.customer, customer_name: delivery.package.archived_customer_name)
                      = render partial: 'distributor/customers/customer_tags', locals: { customer: delivery.customer }

                  .span1{class: "paid-label #{'paid' if delivery.paid?}"}
                    &nbsp;

                  .span5
                    .row-fluid.address-description
                      .span6= display_address(delivery)
                      .span6.box-description= contents_description(delivery, @selected_date)

- else
  #list_type{ data: { type: 'orders', date: @selected_date, screen: 'delivery' } }
    %ul#delivery_list.unstyled
      - @items.each do |order|
        %li.row-fluid.data-listings.pending
          .span6.customer
            = check_box_tag order.id, '1', false, data: { orders: order.id }
            .label.state-label.dso-number= map_pin(order)
            .label.state-label.staus-icon.status-pending{ title: 'PENDING delivery' }
              %i.icon-time
            .customer-holder= customer_badge(order.customer)
            = render partial: 'distributor/customers/customer_tags', locals: { customer: order.customer }

          .span6
            .row-fluid.address-description
              .span6= display_address(order)
              .span6= contents_description(order, @selected_date)

