.nine.columns
  .row.data-headings
    .one.columns= check_box_tag 'all'
    .nine.columns.delivery_actions
      = button_tag 'Delivered', :class => 'small radius button', :id => 'delivered', :disabled => @selected_date.future?
      = button_tag 'Pending', :class => 'small radius button', :id => 'pending', :disabled => @selected_date.future?
      = button_tag 'Missed', :class => 'small radius button', :id => 'missed', :disabled => @selected_date.future?
      #missed-options.has-flyout
        %table.flyout.large
          %tr
            %td= radio_button_tag 'missed', 'cancelled'
            %td= label_tag 'missed_cancelled', 'Cancel delivery'
            %td
          %tr
            %td= radio_button_tag 'missed', 'rescheduled'
            %td= label_tag 'missed_rescheduled', 'Redeliver'
            %td= select_tag 'date_rescheduled', reschedule_dates(@route)
          %tr
            %td= radio_button_tag 'missed', 'repacked'
            %td= label_tag 'missed_repacked', 'Repack delivery'
            %td= select_tag 'date_repacked', reschedule_dates(@route)
          %tr
            %td{:colspan => 2}
            %td= button_tag 'Commit', :class => 'small radius button', :id => 'commit-missed'
    .two.columns

  - @orders.each do |order|
    -# Bad Sam! But convenient for now. Must rejig once development pace settles down a bit.
    - status = order.check_status_by_date(@selected_date)
    - delivery = order.delivery_for_date(@selected_date)
    - delivery_id = delivery.id if delivery

    .row.data-listings{:class => status}
      .one.columns= check_box_tag order.id, '1', false, :data => { :delivery => delivery_id }
      .one.columns= delivery_icons(status, delivery)
      .four.columns= delivery_item_address(order)
      .three.columns== #{order.quantity} - #{order.box.name}
      .three.columns= order.customer.name
