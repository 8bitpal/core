- title('Webstore - Delivery', false)
= render 'webstore_sidebar'
- if current_customer.present? && current_customer.halted?
  .alert.alert-error
    Your account is under the minimum balance and will not recieve new orders unless payment is cleared before the packing date.
= render partial: 'webstore_order', object: @webstore_order

= simple_form_for(:webstore_order, url: webstore_process_step_path) do |f|
  #webstore-route.row-fluid.webstore-section{ style: "display: #{@selected_route_id ? 'none' : 'block'}" }
    .span10
      = f.simple_fields_for(:route) do |g|
        .row-fluid
          .span12
            %h4 Pick A Delivery Service
        .row-fluid
          .span12
            = g.input :route, collection: @route_selections, selected: @selected_route_id, label: 'Select the one that best services your location', include_blank: false, input_html: { id: 'route_select', class: 'span12' }
        .row-fluid
          .span12
            - @routes.each do |route|
              .route-info{ id: "route-info-#{route.id}" }
                = simple_format(route.area_of_service)
                = simple_format(route.estimated_delivery_time)

  #webstore-schedule.row-fluid{ class: "#{@selected_route_id ? 'webstore-section' : ''}" }
    .span10
      = f.simple_fields_for(:schedule_rule) do |g|
        .row-fluid
          .span12
            .row-fluid
              .span12
                %h4 When would you like it?
            = render partial: 'route', collection: @routes, locals: { g: g, frequencies: @order_frequencies, days: @days }

  - if @webstore_order.box.extras_allowed? && @webstore_order.extras.present?
    #webstore-extras-frequency.row-fluid
      .span10
        = f.simple_fields_for(:extra_frequency) do |g|
          .row-fluid
            .span12
              .row-fluid
                .span12
                  %h4 What about those extra items?
              .row-fluid
                .span12= g.input :extra_frequency, label: false, collection: @extra_frequencies, include_blank: false, input_html: { class: 'span12' }

  .row-fluid.webstore-section
    .span12= f.button :submit, 'Next', class: 'pull-right btn btn-process'
